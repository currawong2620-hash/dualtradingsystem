# üìò ROADMAP ‚Äî Dual-Mode Forex Trading System (v1.3 Agile Edition)

## üß≠ –û–±—â–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è

–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–¥—ë—Ç—Å—è **–∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ, –ø–æ –¥–≤—É—Ö–Ω–µ–¥–µ–ª—å–Ω—ã–º —Å–ø—Ä–∏–Ω—Ç–∞–º (S1‚ÄìS4)**.
–ö–∞–∂–¥—ã–π —Å–ø—Ä–∏–Ω—Ç –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è review, unit-—Ç–µ—Å—Ç–∞–º–∏ –∏ refactor –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
–û—Å–Ω–æ–≤–Ω—ã–µ –≤–µ—Ç–∫–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

* `main` ‚Äî —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ —è–¥—Ä–æ (core EA);
* `develop` ‚Äî –∞–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞;
* `feature/pyramiding` ‚Äî —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è;
* `docs` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏.

---

## üóìÔ∏è Sprint 1 ‚Äî Core Foundations

**–¶–µ–ª—å:** –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∂–∏–∑–Ω–µ—Å–ø–æ—Å–æ–±–Ω–æ–µ —è–¥—Ä–æ (MVP).

**–ó–∞–¥–∞—á–∏**

* [x] –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è (`src/`, `tests/`, `docs/`).
* [ ] `TFContext.mqh` ‚Äî ADX, ATR, STD, EMA, BB, RSI.
* [ ] `Forecast.mqh` ‚Äî bias, Œº, œÉ, confidence.
* [ ] `ModeAnalyzer.mqh` ‚Äî FSM —Å hysteresis –∏ N_confirm.
* [ ] –ü—Ä–æ—Å—Ç–∞—è –∫–æ–Ω—Å–æ–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å (log-–≤—ã–≤–æ–¥ —Ä–µ–∂–∏–º–∞ –∏ confidence).
* [ ] OOS-—Ç–µ—Å—Ç 2020‚Äì2021 (train) / 2022‚Äì2023 (test).

**–ú–µ—Ç—Ä–∏–∫–∏**

| –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å                           | –¶–µ–ª—å   |
| ------------------------------------ | ------ |
| PF (baseline)                        | ‚â• 1.2  |
| Sharpe                               | ‚â• 0.6  |
| Max DD                               | ‚â§ 25 % |
| CAR/MDD                              | ‚â• 1.5  |
| –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞ —Å ADX/BB –∫–ª–∞—Å—Ç–µ—Ä–æ–º | ‚â• 75 % |

---

## ‚öôÔ∏è Sprint 2 ‚Äî Risk & Stats

**–¶–µ–ª—å:** –¥–æ–±–∞–≤–∏—Ç—å —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –≥–∏–±–∫–æ—Å—Ç–∏.

**–ó–∞–¥–∞—á–∏**

* [ ] `TradeManager.mqh` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ä–¥–µ—Ä–∞–º–∏, SL/TP, risk ‚â§1 % / 0.5 %.
* [ ] `Risk_Pools.mqh` (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π) ‚Äî Trend/Range allocation (60/40).
* [ ] `Stats.mqh` ‚Äî PF, Sharpe, avg R, win rate –ø–æ —Ä–µ–∂–∏–º–∞–º.
* [ ] `Trade_Simulator.mqh` ‚Äî –º–æ–¥–µ–ª—å —Å–ø—Ä–µ–¥–∞, –∫–æ–º–∏—Å—Å–∏–∏, slippage (Œº = 1 pip, œÉ = 0.5).
* [ ] CI/CD: GitHub Actions compile + backtest reports.
* [ ] CSV-–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ.

**–ú–µ—Ç—Ä–∏–∫–∏**

| –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å      | –¶–µ–ª—å                     |
| --------------- | ------------------------ |
| PF_trend        | ‚â• 1.35                   |
| PF_range        | ‚â• 1.2                    |
| Sharpe          | ‚â• 0.6                    |
| Max DD          | ‚â§ 25 %                   |
| TRANSITION time | ‚â§ 35 % –æ—Ç –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ |

---

## üíπ Sprint 3 ‚Äî Engines & Panel

**–¶–µ–ª—å:** –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ç–æ—Ä–≥–æ–≤—É—é –ª–æ–≥–∏–∫—É –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏.

**–ó–∞–¥–∞—á–∏**

* [ ] `TrendEngine.mqh` ‚Äî breakout + EMA logic, ATR SL/TP.
* [ ] `RangeEngine.mqh` ‚Äî mean-reversion –Ω–∞ BB/RSI.
* [ ] `Panel_Main.mqh` ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∂–∏–º–∞, confidence, equity, DD.
* [ ] `Logging.mqh` ‚Äî —É—Ä–æ–≤–Ω–µ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (INFO/WARN/ERROR).
* [ ] Out-of-Sample —Ç–µ—Å—Ç (2015‚Äì2025, Dukascopy).
* [ ] Fine-tuning FSM thresholds.

**–ú–µ—Ç—Ä–∏–∫–∏**

| –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å                     | –¶–µ–ª—å   |
| ------------------------------ | ------ |
| PF_total                       | ‚â• 1.25 |
| Sharpe                         | ‚â• 0.65 |
| Max DD                         | ‚â§ 25 % |
| CAR/MDD                        | ‚â• 1.5  |
| PF_trend ‚Äì PF_range divergence | ‚â§ 0.25 |

---

## üß™ Sprint 4 ‚Äî Experiments & Validation

**–¶–µ–ª—å:** –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–µ –≤–ª–∏—è—è –Ω–∞ core.

**–ó–∞–¥–∞—á–∏**

* [ ] Branch `feature/pyramiding`: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
  (`Max_levels=1`, `conf>0.8`, `auto-off DD>5 %`).
* [ ] `CalcCumulativeExposure()` –∏ –∑–∞—â–∏—Ç–∞ cumulative risk ‚â§ 2 %.
* [ ] Comparative backtests: core vs pyramiding.
* [ ] Monte-Carlo —Å–∏–º—É–ª—è—Ç–æ—Ä (Python) –¥–ª—è robustness.
* [ ] –ê–≤—Ç–æ-—Ç–µ—Å—Ç—ã CI/CD –Ω–∞ nightly —Å–±–æ—Ä–∫–∞—Ö.

**–ú–µ—Ç—Ä–∏–∫–∏**

| –ü–æ–∫–∞–∑–∞—Ç–µ–ª—å                 | –¶–µ–ª—å   |
| -------------------------- | ------ |
| PF_total                   | ‚â• 1.3  |
| Profit gain (—Å –ø–∏—Ä–∞–º–∏–¥–∞–º–∏) | ‚â• +5 % |
| Max DD (—Å –ø–∏—Ä–∞–º–∏–¥–∞–º–∏)      | ‚â§ 30 % |
| CAR/MDD                    | ‚â• 1.6  |

---

## üîÆ Long-Term Roadmap (v1.4‚Äìv2.0)

| –§–∞–∑–∞ | –§–æ–∫—É—Å              | –ü—Ä–∏–º–µ—á–∞–Ω–∏—è                                |
| ---- | ------------------ | ----------------------------------------- |
| v1.4 | News Filter (core) | –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MQL5 Calendar / FF API         |
| v1.5 | Portfolio Mode     | multi-symbol risk coordination            |
| v1.6 | Auto Optimization  | Œº ¬± œÉ –ø—Ä–æ—Ñ–∏–ª–∏                             |
| v2.0 | ML ModeAnalyzer    | SVM / Random Forest (–ø—Ä–∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º core) |

---

## üìÇ Module Development Priorities (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞)

| ‚Ññ  | –ú–æ–¥—É–ª—å                  | Effort | Dependencies | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ             | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç       | Resources                                                         | –°—Ç–∞—Ç—É—Å |
| -- | ----------------------- | ------ | ------------ | ---------------------- | --------------- | ----------------------------------------------------------------- | ------ |
| 1  | TFContext.mqh           | 8 —á    | ‚Äî            | –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã, –¥–∞–Ω–Ω—ã–µ     | üü© Critical     | [MQL5 CopyBuffer](https://www.mql5.com/en/docs/series/copybuffer) | ‚òê      |
| 2  | Forecast.mqh            | 10 —á   | TFContext    | Bias, Œº, œÉ, confidence | üü© Critical     | [Stat EMA](https://www.mql5.com/en/docs/math/ema)                 | ‚òê      |
| 3  | ModeAnalyzer.mqh        | 12 —á   | Forecast     | FSM —Ä–µ–∂–∏–º–æ–≤            | üü© Critical     | FSM pattern docs                                                  | ‚òê      |
| 4  | TradeManager.mqh        | 10 —á   | Engines      | –û—Ä–¥–µ—Ä–∞, —Ä–∏—Å–∫           | üü© Critical     | [CTrade class](https://www.mql5.com/en/docs/trading/ctrade)       | ‚òê      |
| 5  | TrendEngine.mqh         | 10 —á   | ModeAnalyzer | –õ–æ–≥–∏–∫–∞ —Ç—Ä–µ–Ω–¥–∞          | üü® High         | ‚Äî                                                                 | ‚òê      |
| 6  | RangeEngine.mqh         | 10 —á   | ModeAnalyzer | –õ–æ–≥–∏–∫–∞ —Ñ–ª—ç—Ç–∞           | üü® High         | ‚Äî                                                                 | ‚òê      |
| 7  | Trade_Simulator.mqh     | 8 —á    | TradeManager | –ò—Å–ø–æ–ª–Ω–µ–Ω–∏–µ, slippage   | üüß Medium       | ‚Äî                                                                 | ‚òê      |
| 8  | Stats.mqh               | 6 —á    | TradeManager | –ú–µ—Ç—Ä–∏–∫–∏, –æ—Ç—á—ë—Ç—ã        | üüß Medium       | ‚Äî                                                                 | ‚òê      |
| 9  | Panel_Main.mqh          | 8 —á    | Stats        | –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è           | üü¶ Low          | ‚Äî                                                                 | ‚òê      |
| 10 | Logging.mqh             | 4 —á    | –í—Å–µ          | –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ            | üüß Medium       | ‚Äî                                                                 | ‚òê      |
| 11 | Pyramiding.mqh (branch) | 6 —á    | TradeManager | –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç            | üü¶ Experimental | ‚Äî                                                                 | ‚òê      |
| 12 | NewsFilter.mqh (v1.4)   | 8 —á    | ModeAnalyzer | –°–µ—Å—Å–∏–∏ –∏ —Å–æ–±—ã—Ç–∏—è       | üü¶ Planned      | ‚Äî                                                                 | ‚òê      |

---

## ‚ö†Ô∏è Potential Pitfalls

| –û–±–ª–∞—Å—Ç—å      | –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã                               | –ú–µ—Ä—ã                                   |
| ------------ | ------------------------------------------------ | -------------------------------------- |
| FSM          | –û—à–∏–±–∫–∏ –ª–æ–≥–∏–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –ø—Ä–∏ –¥—É–±–ª–∏—Ä—É—é—â–∏—Ö —Å–∏–≥–Ω–∞–ª–∞—Ö | –î–æ–±–∞–≤–∏—Ç—å debounce / N_confirm          |
| Indicators   | CopyBuffer returns 0                             | Retry / fallback –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ |
| TradeManager | Overfill –ø—Ä–∏ reconnect                           | –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–∑–∏—Ü–∏–∏ –ø–æ ticket ID          |
| Slippage     | –ù–µ–¥–æ–æ—Ü–µ–Ω–∫–∞ –≤ —Ç–µ—Å—Ç–µ—Ä–µ                             | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Å–∏–º—É–ª—è—Ç–æ—Ä —Å–æ œÉ-–≤–∞—Ä–∏–∞—Ü–∏–µ–π    |
| Overfitting  | –ß—Ä–µ–∑–º–µ—Ä–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–æ–¥ —Ç–µ—Å—Ç—ã                 | Walk-Forward –∏ OOS –≤–∞–ª–∏–¥–∞—Ü–∏—è           |
| Pyramiding   | –†–æ—Å—Ç DD > –æ–∂–∏–¥–∞–Ω–∏–π                               | Feature flag –∏ auto-off                |

---

## ‚öôÔ∏è Engineering Notes

* –ö–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –¥–æ —Å—Ç–∞–¥–∏–∏ `#include` –≤ EA.
* –í—Å–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç—ã (–ø–∏—Ä–∞–º–∏–¥–∏–Ω–≥, ML) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞ `#ifdef` —Ñ–ª–∞–≥–∞–º–∏.
* CI/CD: –∞–≤—Ç–æ—Å–±–æ—Ä–∫–∞ MT5-EA —á–µ—Ä–µ–∑ MetaEditor CLI + –æ—Ç—á—ë—Ç –≤ `/tests/reports/`.
* –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —Å–ø—Ä–∏–Ω—Ç–∞ ‚Äî review, —Ñ–∏–∫—Å–∞—Ü–∏—è –±–∞–≥–æ–≤ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ roadmap-–≤–µ—Ä—Å–∏–∏.
* –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ `/docs/` –¥–æ–ª–∂–Ω–∞ –≤–∫–ª—é—á–∞—Ç—å –¥–∏–∞–≥—Ä–∞–º–º—É –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ data-flow.

---

üìÑ **–í–µ—Ä—Å–∏—è:** `ROADMAP v1.3 ‚Äî Agile, CI/CD, OOS-Driven Development`
üìÖ **–î–∞—Ç–∞:** 2025-11-12
¬© Dual-Mode Forex Project
