# üìò **README.md ‚Äî Dual-Mode Forex System (v1.0 Core)**

# Dual-Mode Forex System  
### Adaptive Market-Regime EA for MetaTrader 5  
**Version:** v1.0 Core Release  
**License:** MIT  
**Status:** Active Development

---

## üìå Overview

**Dual-Mode Forex System** ‚Äî —ç—Ç–æ –º–æ–¥—É–ª—å–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è MetaTrader 5,  
–∫–æ—Ç–æ—Ä–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ä—ã–Ω–æ—á–Ω—ã–π —Ä–µ–∂–∏–º (—Ç—Ä–µ–Ω–¥ –∏–ª–∏ —Ñ–ª—ç—Ç) –∏  
–ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Å–ª–æ–≤–∏–π —Ä—ã–Ω–∫–∞.

–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∞ –≤–æ–∫—Ä—É–≥ —Ç—Ä—ë—Ö –∫–ª—é—á–µ–≤—ã—Ö –∏–¥–µ–π:

1. **Market Regime Detection (Mode Analyzer)**  
   –°—Ç–∞—Ä—à–∏–π TF –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –º–æ–¥–µ–ª—å—é bias-Œº-œÉ ‚Üí TREND / RANGE / TRANSITION.

2. **Two-Layer Forecasting Model (Forecast Engine)**  
   –ö–∞–∂–¥—ã–π TF –ø–æ–ª—É—á–∞–µ—Ç bias (—Å–≥–ª–∞–∂–µ–Ω–Ω—ã–π –¥–∏—Å–±–∞–ª–∞–Ω—Å –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ—Å—Ç–∏) –∏ confidence (–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å —Å–∏–≥–Ω–∞–ª–∞).

3. **Trade Simulation Manager (v1.0)**  
   –ù–∞ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ ‚Äî  
   –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–¥—É–ª—å–Ω—ã–π –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π —Å–∏–º—É–ª—è—Ç–æ—Ä —Å–¥–µ–ª–æ–∫,  
   –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º—ã –¥–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ Trade Engine.

---

## üìÇ Project Structure

```

/src
‚îú‚îÄ‚îÄ Core
‚îÇ    ‚îú‚îÄ‚îÄ TFContext.mqh       # –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏ –ø–µ—Ä–≤–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ    ‚îú‚îÄ‚îÄ Forecast.mqh        # Bias/Œº/œÉ/confidence
‚îÇ    ‚îú‚îÄ‚îÄ ModeAnalyzer.mqh    # FSM —Ä–µ–∂–∏–º–∞: TREND/RANGE/TRANSITION
‚îÇ    ‚îî‚îÄ‚îÄ Logging.mqh         # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Ñ–∞–π–ª –∏ –∫–æ–Ω—Å–æ–ª—å
‚îÇ
‚îú‚îÄ‚îÄ Trade
‚îÇ    ‚îú‚îÄ‚îÄ Trade_Types.mqh     # –û–±—â–∏–µ —Ç–∏–ø—ã –∏ enums
‚îÇ    ‚îú‚îÄ‚îÄ Trade_Stats.mqh     # PF, WinRate, Equity tracking
‚îÇ    ‚îú‚îÄ‚îÄ Trade_Simulator.mqh # –ú–æ–¥–µ–ª—å —Å–¥–µ–ª–æ–∫ (v1.0)
‚îÇ    ‚îú‚îÄ‚îÄ Trade_Manager.mqh   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏–º—É–ª—è—Ü–∏–µ–π –∏ —Å–æ–±—ã—Ç–∏—è–º–∏ –±–∞—Ä–∞
‚îÇ    ‚îú‚îÄ‚îÄ Trade_Risk.mqh      # –§—Ä–µ–π–º–≤–æ—Ä–∫ —Ä–∏—Å–∫-–º–æ–¥–µ–ª–∏ (—Ä–µ–∑–µ—Ä–≤)
‚îÇ    ‚îú‚îÄ‚îÄ Trade_Entry.mqh     # –ö–∞—Ä–∫–∞—Å –≤—Ö–æ–¥–æ–≤ (v1.1)
‚îÇ    ‚îî‚îÄ‚îÄ Trade_Exit.mqh      # –ö–∞—Ä–∫–∞—Å –≤—ã—Ö–æ–¥–æ–≤ (v1.1)
‚îÇ
‚îú‚îÄ‚îÄ Panels
‚îÇ    ‚îî‚îÄ‚îÄ Panel_Main.mqh      # –ú–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚îÇ
‚îî‚îÄ‚îÄ DualModeEA.mq5           # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª —ç–∫—Å–ø–µ—Ä—Ç–∞

```

---

## ‚öôÔ∏è Key Components (v1.0 Core)

### **1. TFContext ‚Äî –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç**
–û—Ç–≤–µ—á–∞–µ—Ç –∑–∞:

- –±–µ–∑–æ–ø–∞—Å–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤,
- –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –∫–∞–∂–¥–æ–º —Ç–∏–∫–µ,
- —Ö—Ä–∞–Ω–µ–Ω–∏–µ ADX, ATR, StdDev, MA, RSI.

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ CopyBuffer-–∑–∞–ø—Ä–æ—Å—ã –∏ fallback-–ª–æ–≥–∏–∫—É.

---

### **2. Forecast Engine ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –º–æ–¥–µ–ª—å**

–ú–æ–¥–µ–ª—å —Å—á–∏—Ç–∞–µ—Ç:

- **bias** ‚Äî –≤–∑–≤–µ—à–µ–Ω–Ω—ã–π –¥–∏—Å–±–∞–ª–∞–Ω—Å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤,
- **Œº (mu)** ‚Äî EMA —Å—Ä–µ–¥–Ω–µ–≥–æ bias,
- **œÉ (sigma)** ‚Äî EMA –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è,
- **confidence** = |bias| / (œÉ + Œµ),
- –∫–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º TF.

–§–æ—Ä–º—É–ª—ã –ø—Ä–∏–≤–æ–¥—è—Ç—Å—è –≤ TECH_SPEC.md.

---

### **3. Mode Analyzer ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ä—ã–Ω–æ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞**

FSM —Å —Ç—Ä–µ–º—è —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏:

- `REGIME_TREND`
- `REGIME_RANGE`
- `REGIME_TRANSITION`

–ü–µ—Ä–µ—Ö–æ–¥—ã –æ—Å—É—â–µ—Å—Ç–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ hysteresis + N-confirm (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3 –±–∞—Ä–∞).

–°—Ç–∞—Ä—à–∏–π TF –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º –¥–ª—è –≤—Å–µ–≥–æ —Å–æ–≤–µ—Ç–Ω–∏–∫–∞.

---

### **4. Trade Layer (v1.0 Simulation)**

–°–∏—Å—Ç–µ–º–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å —Ç–æ—Ä–≥–æ–≤–ª–∏:

- **TradeManager** ‚Äî —Ü–µ–Ω—Ç—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤–ª–µ–π
- **TradeSimulator** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–¥–µ–ª–æ–∫ –ø–æ —Å–∏–≥–Ω–∞–ª–∞–º –∏ ATR
- **TradeStats** ‚Äî —É—á—ë—Ç PF, WinRate, Equity, LastTrade
- **TradeTypes** ‚Äî —Ç–∏–ø—ã –∏ enum'—ã

–í –≤–µ—Ä—Å–∏–∏ **v1.0 –Ω–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏**,  
—Ç–æ–ª—å–∫–æ *—Å–∏–º—É–ª—è—Ü–∏—è* ‚Äî –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ —Ä–µ–∂–∏–º–∞ –∏ –ø—Ä–æ–≥–Ω–æ–∑–æ–≤.

–í –≤–µ—Ä—Å–∏–∏ **v1.1** –¥–æ–±–∞–≤–∏—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π Trade Engine.

---

### **5. Multi-line Info Panel**

–ü–∞–Ω–µ–ª—å –≤—ã–≤–æ–¥–∏—Ç:

- —Ä–µ–∂–∏–º —Ä—ã–Ω–∫–∞,
- bias/Œº/œÉ/conf –¥–≤—É—Ö TF,
- –ª–æ–∫–∞–ª—å–Ω—ã–µ —Ä–µ–∂–∏–º—ã,
- —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∏–º—É–ª—è—Ü–∏–∏,
- –∏–º—è —Å–∏–º–≤–æ–ª–∞ –∏ –¢–§.

–†–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ OBJ_LABEL –∏ –Ω–∞–¥—ë–∂–Ω–∞ –Ω–∞ –≤—Å–µ—Ö –±–∏–ª–¥–∞—Ö MT5.

---

### **6. Logging Subsystem**

–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- —É—Ä–æ–≤–Ω–∏ LOG_DEBUG / LOG_INFO / LOG_WARN / LOG_ERROR,
- –≤—ã–≤–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—å,
- –≤—ã–≤–æ–¥ –≤ —Ñ–∞–π–ª `Files/DualMode_Log.txt`,
- –±–µ–∑–æ–ø–∞—Å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π.

---

## üöÄ Running the EA (v1.0)

1. –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ `MQL5/Experts/DualModeForexSystem/`.
2. –û—Ç–∫—Ä—ã—Ç—å –ª—é–±—É—é –≤–∞–ª—é—Ç–Ω—É—é –ø–∞—Ä—É.
3. –í—ã–±—Ä–∞—Ç—å —Ä–∞–±–æ—á–∏–µ TF –∏ —Å—Ç–∞—Ä—à–∏–π TF –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö.
4. –ó–∞–ø—É—Å—Ç–∏—Ç—å.

EA:

- –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –±–∞—Ä—ã,
- –æ–±–Ω–æ–≤–ª—è–µ—Ç TFContext,
- –æ–±–Ω–æ–≤–ª—è–µ—Ç Forecast,
- –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ä–µ–∂–∏–º,
- –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –ø–∞–Ω–µ–ª—å,
- –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–∏–º—É–ª—è—Ü–∏—é —Å–¥–µ–ª–æ–∫.

---

## üß† Design Philosophy

Dual-Mode Forex System —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º:

- **–º–æ–¥—É–ª—å–Ω–æ—Å—Ç–∏**: –∫–∞–∂–¥—ã–π –±–ª–æ–∫ –Ω–µ–∑–∞–≤–∏—Å–∏–º,
- **–¥–µ—Ç–µ—Ä–º–∏–Ω–∏–∑–º–∞**: –ø—Ä–æ–≥–Ω–æ–∑ –∑–∞–≤–∏—Å–∏—Ç —Ç–æ–ª—å–∫–æ –æ—Ç –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–µ –æ—Ç –∏—Å—Ç–æ—Ä–∏–∏ —Ç–∏–∫–æ–≤,
- **—Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç–∏**: —Å–∏–º—É–ª—è—Ü–∏—è –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å Trade Engine,
- **—Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç–∏**: –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å TrendEngine –∏ RangeEngine –≤ v1.1,
- **–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏**: –ø–∞–Ω–µ–ª—å –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—é—Ç –ø–æ–Ω—è—Ç–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–µ–≥–æ.

---

## üìà Version Status

| Component               | v1.0 Status |
|------------------------|-------------|
| Forecast Engine        | ‚úî Stable    |
| Mode Analyzer          | ‚úî Stable    |
| TFContext              | ‚úî Stable    |
| Trade Simulator        | ‚úî Stable    |
| Panel                  | ‚úî Stable    |
| Logging                | ‚úî Stable    |
| Real Trade Engine      | ‚è≥ Planned   |
| Risk Engine            | ‚è≥ Planned   |
| News Filter            | ‚è≥ Planned   |
| Portfolio Mode         | ‚è≥ Planned   |
| ML Mode Analyzer       | ‚è≥ Planned   |

---

## üìö Documentation

- `TECH_SPEC.md` ‚Äî –ø–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã.  
- `ROADMAP.md` ‚Äî –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è –∏ –±—É–¥—É—â–∏–µ –≤–µ—Ä—Å–∏–∏.

---

## ¬© Dual-Mode Forex System ‚Äî 2025
–ü—Ä–æ–µ–∫—Ç –≤ –∞–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ.  
Pull Requests –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è.
